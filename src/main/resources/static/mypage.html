<!doctype html>
<html lang="ko" xmlns="http://www.w3.org/1999/html">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="Mark Otto, Jacob Thornton, and Bootstrap contributors">
    <meta name="generator" content="Hugo 0.88.1">
    <title> 오늘 뭐 먹지? </title>

    <link rel="canonical" href="https://getbootstrap.com/docs/5.1/examples/album/">

    <!-- Bootstrap core CSS -->
    <link href="css/bootstrap.min.css" rel="stylesheet">

    <link href="css/mycss.css" rel="stylesheet">

    <!-- Bootstrap -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
            crossorigin="anonymous"></script>
    <script src="../assets/dist/js/bootstrap.bundle.min.js"></script>

    <!--파비콘-->
    <link rel="shortcut icon" type="image/x-icon" href="favicon2.ico"/>


    <!-- JS -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.js"></script>

    <!-- 구글 폰트 -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Black+Han+Sans&display=swap" rel="stylesheet">

    <style>
        .bd-placeholder-img {
            font-size: 1.125rem;
            text-anchor: middle;
            -webkit-user-select: none;
            -moz-user-select: none;
            user-select: none;
        }

        @media (min-width: 768px) {
            .bd-placeholder-img-lg {
                font-size: 3.5rem;
            }
        }
    </style>

    <script>

        $(document).ready(function () {
            //토큰이 있으면 로그인 화면
            if (localStorage.getItem("token")) {
                $("#logout").css("display","block");
                $("#mypage").css("display","block");
                $("#login").css("display","none");
                $("#username").html(localStorage.getItem("username"));
            } else {
                //토큰이 없으면 로그아웃된 화면
                $("#userMessege").empty();
                $("#logout").css("display","none");
                $("#mypage").css("display","none");
            }
            $("#logout").click(function () {
                //로그아웃
                localStorage.removeItem("token");
                localStorage.removeItem("username");
                location.href = '/';
            });

            $.ajax({
                type:"GET",
                url:"/mypage",
                success:function(response) {
                    console.log(response)
                    let temp = `
                    <p>닉네임 : ${'response.nickname'}</p>
                    <p>id : ${'response.username'}</p>
                    <p>오늘 상태 : ${'response.username'}</p>
                    `
                }
            })
        })
        //api를 호출할 때 localstorage에 값이 있으면 헤더에 토큰값을 넣어서 보내게 된다.
        $.ajaxPrefilter(function (options, originalOptions, jqXHR) {
            if (localStorage.getItem('token')) {
                jqXHR.setRequestHeader('Authorization', 'Bearer ' + localStorage.getItem('token'));
            }
        });


    </script>

</head>
<body>

<header>
    <div class="navbar navbar-dark bg-dark shadow-sm">
        <div class="container">
            <a href="#" class="navbar-brand d-flex align-items-center">
                <strong>오늘 뭐 먹지?</strong>
            </a>
            <button class="btn btn-primary" onclick="onclick=window.location.href = '/user/login'" id="login">로그인</button>
            <button class="btn btn-primary" onclick="onclick=window.location.href = '/user/login'" id="logout">로그아웃</button>
            <button class="btn btn-primary" onclick="onclick=window.location.href = '/user/login'" id="mypage">마이페이지</button>
        </div>
    </div>
</header>

<main>
    <section class="py-5 text-center container">
        <div class="row py-lg-5">
            <div class="col-lg-6 col-md-8 mx-auto">
                <div id="userMessege"><div class="header"><span id="username"></span> 님의 개인적인 공간</div></div>
            </div>
        </div>
    </section>




</main>

<footer class="text-muted py-5">
    <div class="container">
        <p class="float-end mb-1">
            <a href="#">Back to top</a>
        </p>
        <p>
            <strong>오늘 뭐 먹지?</strong> made by
            <a href="https://github.com/bestmealever">이거사조</a>. <br>
            이거사조 is Team 4 in 내일배움캠프. <br>
            Welcome to <a href="https://spartacodingclub.kr/">스파르타코딩클럽</a>.
        </p>
    </div>
</footer>
</body>
</html>
